<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css" integrity="sha384-b6lVK+yci+bfDmaY1u0zE8YYJt0TZxLEAFyYSLHId4xoVvsrQu3INevFKo+Xir8e" crossorigin="anonymous">
    <link href="styles.css" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href="../Favicon.png">
    <title>Swan â€” Open-source topology optimization toolbox</title>
    <meta name="description" content="Swan is an open-source topology optimization toolbox capable of performing structural and material design.">
    <meta name="google-site-verification" content="pr_Jm0UnfZOkjon7KUwwYKTzAtx8v9-VLXi1uvzTMWw" />
  </head>
  <body>

  <!-- Fixed navbar -->
  <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
    <div class="container navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">  
    <div class="mx-auto order-0">
      <a class="navbar-brand mx-auto" href="../index.html"><img src="../SwanLogo_White.png" height="32px"></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#uwual-collapse2" aria-controls="uwual-collapse2" aria-expanded="false" aria-label="Toggle Navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
    </div>
    <div class="navbar-collapse collapse w-100 order-3 dual-collapse2" id="uwual-collapse2">
        <ul class="navbar-nav ms-auto">
            <li class="nav-item">
                <a class="nav-link" href="../features.html">Features</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="../results.hmtl">Results</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="../documentation.html">Documentation</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="../about.html">About</a>
            </li>
        </ul>
    </div>
  </div>
</nav>


<main>

      <!-- CANTILEVER -->
      <div class ="jumbotron">
        <div class="container px-4 py-5" id="custom-cards">
          <h2 class="pb-2 border-bottom">Creating a Level Set function</h2>
          

          
    <div class="px-4 py-5">
      <div class="col-lg-10 mx-auto">
          <p class="mb-4">
            <h3 class="my-4">Introduction</h3>
            In these tutorial files, you will learn how to use the various modules of Swan in order to generate your own FEM and Topology Optimization simulations. In each tutorial, a single building block will be analyzed, with some examples to make it easier. If you have any questions, feel free to create a new issue in the GitHub repository.
            
            In this tutorial, we will learn how to create Level Set functions, plot them and export them in the .stl format.

            <h3 class="my-4">Running</h3>
            <h4 class="my-4">Meshes</h4>
            The first step is to create a mesh. As previously discussed, this can be done using external software (eg. GiD) or via code. Let's use the latter case as an example:
            
            <pre>
              <code>
                close all;

                x1 = linspace(-1,1,20);
                x2 = linspace(0,1,20);
                [xv,yv] = meshgrid(x1,x2);
                [F,V] = mesh2tri(xv,yv,zeros(size(xv)),'x');
                sBg.coord  = V(:,1:2);
                sBg.connec = F;
                bgMesh = Mesh(sBg);
                figure
                bgMesh.plot()
              </code>
            </pre>

            <img src="swan-tuts/levelset-1.png" class="rounded mx-auto d-block" alt="Sample background mesh">

            This will act as the base background mesh, upon which the level set function will live. Next, we will create the boundary mesh of this background mesh:

            <pre>
              <code>
                sBd.backgroundMesh = bgMesh;
                sBd.dimension      = 1:3;
                sBd.type = 'FromReactangularBox';
                bMc = BoundaryMeshCreator.create(sBd);
                bdMesh  = bMc.create();
              </code>
            </pre>

            The resulting bdMesh is made up of 4 different boundary meshes, one for each of the edges of the original background mesh. For example, let's visualize the first of these meshes.

            <pre>
              <code>
                figure
                bdMesh{1}.mesh.plot()
              </code>
            </pre>

            <img src="swan-tuts/levelset-2.png" class="rounded mx-auto d-block" alt="Boundary edge mesh">

            It is a one-dimensional edge mesh, which corresponds to the left-most part of the mesh.

            <h4 class="my-4">Level-set function</h4>
            Let's set aside these boundary meshes and go back to the background mesh, where the level-set function will lay. We can create this function using the following code:

            <pre>
              <code>
                sLS.type       = 'circleInclusion';
                sLS.mesh       = bgMesh;
                sLS.ndim       = 2;
                sLS.fracRadius = 0.4;
                sLS.coord      = bgMesh.coord;
                ls = LevelSetCreator.create(sLS);
                levelSet = ls.getValue();
              </code>
            </pre>


            <img src="swan-tuts/levelset-3.png" class="rounded mx-auto d-block" alt="Level-set P1Function">

            <h4 class="my-4">Unfitted Mesh</h4>
            Having generated both meshes and the level set function, the Unfitted Mesh can now be generated

            <pre>
              <code>
                sUm.boundaryMesh   = bdMesh;
                sUm.backgroundMesh = bgMesh;
                uMesh = UnfittedMesh(sUm);
                uMesh.compute(levelSet);
              </code>
            </pre>
            
            It looks like this:

            <pre>
              <code>
                uMesh.plot
              </code>
            </pre>

            <img src="swan-tuts/levelset-4.png" class="rounded mx-auto d-block" alt="Unfitted mesh">

            This Unfitted Mesh is made up of different parts:
            <ul>
              <li>the inner mesh, which is the inner part of the background mesh that has not been cut</li>
              <li>the inner cut mesh, which is the inner part of the background mesh that has been cut</li>
              <li>the boundary cut mesh, which is the part of the boundary mesh that has been cut</li>
              <li>the unfitted boundary mesh, which is analogous to the boundary mesh that we previously saw</li>
            </ul>

            <h4 class="my-4">Get the full inner mesh</h4>
            Since the inner mesh is separated in two meshes, we can join them using

            <pre><code>
                IM = uMesh.createInnerMesh();
            </code></pre>

            Another option is to use GiD to join them. This process improves the conditioning of the mesh, but requires installing GiD and adding its path to UserVariables.m

            <pre><code>
              IMcond = uMesh.createInnerMeshGoodConditioning();
            </code></pre>

            <h4 class="my-4">Extrude 2D meshes</h4>
            Two-dimensional meshes can be extruded, but once again, the process requires having previously installed GiD.

            <pre><code>
              height = 0.16;
              EM = IMcond.provideExtrudedMesh(height);
            </code></pre>

            <h4 class="my-4">Export as .stl</h4>
            Once again, using GiD, we can export the resulting mesh as an .stl file ready for 3D printing.

            <pre><code>
              EM.exportSTL();
            </code></pre>

            <h3 class="my-4">Miss anything?</h3>
            Feel free to create a new Issue in Swan's GitHub repository with any questions or doubts you may have. We will get back to you as soon as possible!            


          </p>
      </div>
    </div>

</main>


<footer class="footer mt-auto py-3 bg-light text-muted">
  <div class="container px-4 py-2" id="featured-3">
    <div class="row g-4 row-cols-1 row-cols-lg-3">
      <div class="feature col">
        <a class="navbar-brand mx-auto" href="../index.html"><img src="../SwanLogo_Gray.png" height="48px"></a>
      </div>
      <div class="feature col">
        <div><a href="../features.html" class="text-decoration-none link-secondary">Features</a></div>
        <div><a href="../results.html" class="text-decoration-none link-secondary">Results</a></div>
        <div><a href="../documentation.html" class="text-decoration-none link-secondary">Documentation</a></div>
        <div><a href="../about.html" class="text-decoration-none link-secondary">About</a></div>
      </div>
      <div class="feature col">
        <div><a href="https://github.com/SwanLab/Swan" class="text-decoration-none link-secondary">GitHub</a></div>
        <div><a href="https://www.cimne.com/3610/research-areas-and-groups/computational-materials-design--analysis/composites-and-advanced-materials-for-multifunctio" class="text-decoration-none link-secondary">CAMMS</a></div>
      </div>
    </div>
  </div>
</footer>

  </body>
</html>